<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SalouManager</title>
        <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="images/logobg.png">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles/globlaWebSite1.css">
</head>
<body>
    <div class="d-flex">
        <!-- Barre de navigation -->
        <nav class="sidebar p-3 vh-100">
            <h2 class="text-center text-uppercase" id="menuTitle">Menu</h2>
            <ul class="nav flex-column mt-4">
                <li class="nav-item mb-3">
                    <a href="globlaWebSite1.html" class="nav-link text-dark">
                        <img src="images/home.png" alt="Accueil" class="menu-icon"> <span id="homeLink">Accueil</span>
                    </a>
                </li>
                <li class="nav-item mb-3">
                    <a href="dashboard1.html" class="nav-link text-dark">
                        <img src="images/dashboard.png" alt="Dashboard" class="menu-icon"> <span id="dashboardLink">Dashboard</span>
                    </a>
                </li>
                <li class="nav-item mb-3">
                    <a href="page1.html" class="nav-link text-dark">
                        <img src="images/products.png" alt="Produits" class="menu-icon"> <span id="productsLink">Produits</span>
                    </a>
                </li>
                <li class="nav-item mb-3">
                    <a href="pageCommandes1.html" class="nav-link text-dark">
                        <img src="images/orders.png" alt="Commandes" class="menu-icon"> <span id="ordersLink">Commandes</span>
                    </a>
                </li>
                <li class="nav-item mb-3">
                    <a href="pageFournisseur1.html" class="nav-link text-dark">
                        <img src="images/suppliers.png" alt="Fournisseurs" class="menu-icon"> <span id="suppliersLink">Fournisseurs</span>
                    </a>
                </li>
                <li class="nav-item mb-3">
                    <a href="pageRapport1.html" class="nav-link text-dark">
                        <img src="images/reports.png" alt="Rapports" class="menu-icon"> <span id="reportsLink">Rapports</span>
                    </a>
                </li>
                <li class="nav-item mb-3">
                    <a href="createuser1.html" class="nav-link text-dark">
                        <img src="images/add.png" alt="Créer un utilisateur" class="menu-icon"> <span id="createUserLink">Créer un utilisateur</span>
                    </a>
                </li>
                <li class="nav-item mb-3">
                    <a href="displayusers1.html" class="nav-link text-dark">
                        <img src="images/view.png" alt="Voir les utilisateurs" class="menu-icon"> <span id="viewUsersLink">Voir les utilisateurs</span>
                    </a>
                </li>
                <li class="nav-item mb-3">
                    <a href="pageParam1.html" class="nav-link text-dark">
                        <img src="images/settings.png" alt="Paramètres" class="menu-icon"> <span id="settingsLink">Paramètres</span>
                    </a>
                </li>
            </ul>
            <!-- Bouton de Déconnexion -->
            <button class="btn btn-danger w-100 mt-5" id="logoutButton">Déconnexion</button>
        </nav>
            <!-- Script pour gérer la déconnexion -->
            <script>
                // Gestion du clic sur le bouton de déconnexion
                document.getElementById('logoutButton').addEventListener('click', function () {
                    // Redirection vers la page d'authentification
                    window.location.href = 'index.html';
                });
            </script>
        <!-- Contenu principal -->
        <div class="main-content p-5 w-100">
            <h1 class="text-center" id="welcomeTitle">Bienvenue dans le système de gestion</h1>
            <p class="text-center" id="welcomeDescription">Utilisez la barre de navigation pour accéder aux différentes fonctionnalités.</p>

            <!-- Section Recent Tabs -->
            <div class="recent-tabs-section">
                <div class="section-header">
                    <img src="images/recent.png" alt="Recent Tabs Icon" class="section-icon">
                    <h2 id="recentTabsTitle">Onglets récents</h2>
                </div>
                <div class="recent-tabs-content" id="recentTabsContent">
                    <!-- Dynamic content for recent tabs will be loaded here -->
                    <p id="recentTabsMessage">Aucun onglet récent pour le moment.</p>
                </div>
            </div>

            <!-- Section Quick Links -->
            <div class="quick-links-section">
                <div class="section-header">
                    <img src="images/quick.png" alt="Quick Links Icon" class="section-icon">
                    <h2 id="quickLinksTitle">Liens rapides</h2>
                </div>
                <div class="quick-links-content">
                    <div class="row">
                        <div class="col-md-6">
                            <button class="btn btn-quick-link" id="createUserButton" onclick="navigateTo('createuser.html', 'Créer un utilisateur')">Créer un utilisateur</button>
                            <button class="btn btn-quick-link" id="viewUsersButton" onclick="navigateTo('displayusers1.html', 'Voir les utilisateurs')">Voir les utilisateurs</button>
                            <button class="btn btn-quick-link" id="reportDefectButton" onclick="navigateTo('pageRapport1.html', 'Signaler un produit défectueux')">Signaler un produit défectueux</button>
                        </div>
                        <div class="col-md-6">
                            <button class="btn btn-quick-link" id="viewProductsButton" onclick="navigateTo('page1.html', 'Voir les produits disponibles')">Voir les produits disponibles</button>
                            <button class="btn btn-quick-link" id="viewSuppliersButton" onclick="navigateTo('pageFournisseur1.html', 'Voir la liste des fournisseurs')">Voir la liste des fournisseurs</button>
                            <button class="btn btn-quick-link" id="viewOrdersButton" onclick="navigateTo('pageCommandes1.html', 'Voir la liste des commandes')">Voir la liste des commandes</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="scripts/globlaWebSite1.js"></script>

    <script>
        // Translations for globlaWebSite1.html
        const translations = {
            fr: {
                menuTitle: 'Menu',
                homeLink: 'Accueil',
                dashboardLink: 'Dashboard',
                productsLink: 'Produits',
                ordersLink: 'Commandes',
                suppliersLink: 'Fournisseurs',
                reportsLink: 'Rapports',
                settingsLink: 'Paramètres',
                createUserLink: 'Créer un utilisateur',
                viewUsersLink: 'Voir les utilisateurs',
                welcomeTitle: 'Bienvenue dans le système de gestion',
                welcomeDescription: 'Utilisez la barre de navigation pour accéder aux différentes fonctionnalités.',
                recentTabsTitle: 'Onglets récents',
                recentTabsMessage: 'Aucun onglet récent pour le moment.',
                quickLinksTitle: 'Liens rapides',
                createUserButton: 'Créer un utilisateur',
                viewUsersButton: 'Voir les utilisateurs',
                reportDefectButton: 'Signaler un produit défectueux',
                viewProductsButton: 'Voir les produits disponibles',
                viewSuppliersButton: 'Voir la liste des fournisseurs',
                viewOrdersButton: 'Voir la liste des commandes',
                logoutButton: 'Déconnexion'
            },
            en: {
                menuTitle: 'Menu',
                homeLink: 'Home',
                dashboardLink: 'Dashboard',
                productsLink: 'Products',
                ordersLink: 'Orders',
                suppliersLink: 'Suppliers',
                reportsLink: 'Reports',
                settingsLink: 'Settings',
                createUserLink: 'Create User',
                viewUsersLink: 'View Users',
                welcomeTitle: 'Welcome to the Management System',
                welcomeDescription: 'Use the navigation bar to access different features.',
                recentTabsTitle: 'Recent Tabs',
                recentTabsMessage: 'No recent tabs at the moment.',
                quickLinksTitle: 'Quick Links',
                createUserButton: 'Create User',
                viewUsersButton: 'View Users',
                reportDefectButton: 'Report Defective Product',
                viewProductsButton: 'View Available Products',
                viewSuppliersButton: 'View List of Suppliers',
                viewOrdersButton: 'View List of Orders',
                logoutButton: 'Logout'
            },
            ar: {
                menuTitle: 'القائمة',
                homeLink: 'الصفحة الرئيسية',
                dashboardLink: 'لوحة التحكم',
                productsLink: 'المنتجات',
                ordersLink: 'الطلبات',
                suppliersLink: 'الموردين',
                reportsLink: 'التقارير',
                settingsLink: 'الإعدادات',
                createUserLink: 'إنشاء مستخدم',
                viewUsersLink: 'عرض المستخدمين',
                welcomeTitle: 'مرحبًا بكم في نظام الإدارة',
                welcomeDescription: 'استخدم شريط التنقل للوصول إلى الميزات المختلفة.',
                recentTabsTitle: 'نوافذ تم فتحها مؤخراً',
                recentTabsMessage: 'لا توجد نوافذ حديثة في الوقت الحالي.',
                quickLinksTitle: 'روابط سريعة',
                createUserButton: 'إنشاء مستخدم',
                viewUsersButton: 'عرض المستخدمين',
                reportDefectButton: 'الإبلاغ عن منتج معيب',
                viewProductsButton: 'عرض المنتجات المتاحة',
                viewSuppliersButton: 'عرض قائمة الموردين',
                viewOrdersButton: 'عرض قائمة الطلبات',
                logoutButton: 'تسجيل الخروج'
            }
        };

        // Load the selected language from localStorage on page load
        document.addEventListener('DOMContentLoaded', function () {
            const savedLang = localStorage.getItem('selectedLanguage') || 'fr';
            document.documentElement.lang = savedLang;
            document.documentElement.dir = savedLang === 'ar' ? 'rtl' : 'ltr';
            applyTranslations(savedLang);
            loadRecentTabs();
        });

        // Apply translations
        function applyTranslations(lang) {
            const translation = translations[lang];
            for (const [key, value] of Object.entries(translation)) {
                const element = document.getElementById(key);
                if (element) {
                    element.textContent = value;
                }
            }
        }

        // Recent Tabs Logic
        function loadRecentTabs() {
            const recentTabs = JSON.parse(localStorage.getItem('recentTabs')) || [];
            const recentTabsContent = document.getElementById('recentTabsContent');
            recentTabsContent.innerHTML = '';

            if (recentTabs.length === 0) {
                recentTabsContent.innerHTML = `<p id="recentTabsMessage">${translations[document.documentElement.lang].recentTabsMessage}</p>`;
            } else {
                recentTabs.forEach(tab => {
                    const button = document.createElement('button');
                    button.className = 'btn btn-quick-link';
                    button.textContent = tab.title;
                    button.onclick = () => window.location.href = tab.url;
                    recentTabsContent.appendChild(button);
                });
            }
        }

        // Save recent tab when navigating
        function saveRecentTab(title, url) {
            let recentTabs = JSON.parse(localStorage.getItem('recentTabs')) || [];
            const existingTab = recentTabs.find(tab => tab.url === url);

            if (!existingTab) {
                // Add the new tab
                recentTabs.push({ title, url });

                // Keep only the last 3 tabs
                if (recentTabs.length > 3) {
                    recentTabs = recentTabs.slice(-3); // Keep only the last 3 tabs
                }

                localStorage.setItem('recentTabs', JSON.stringify(recentTabs));
            }
        }

        // Navigate to a page and save the tab
        function navigateTo(url, title) {
            saveRecentTab(title, url);
            window.location.href = url;
        }

        // Clear recent tabs on logout
        document.getElementById('logoutButton').addEventListener('click', function () {
            localStorage.removeItem('recentTabs');
        });
    </script>
</body>
</html>