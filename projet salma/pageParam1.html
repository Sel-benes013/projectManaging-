<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paramètres</title>
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="images/logobg.png">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&family=Montserrat:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="styles/pageParam1.css">
</head>
<body>
    <div class="d-flex">
        <!-- Barre de navigation -->
        <nav class="sidebar p-3">
            <h2 class="text-center text-uppercase" id="menuTitle">Menu</h2>
            <ul class="nav flex-column mt-4">
                <li class="nav-item mb-3">
                    <a href="globlaWebSite1.html" class="nav-link text-dark">
                        <img src="images/home.png" alt="Accueil" class="menu-icon"> <span id="homeLink">Accueil</span>
                    </a>
                </li>
                <li class="nav-item mb-3">
                    <a href="dashboard1.html" class="nav-link text-dark">
                        <img src="images/dashboard.png" alt="Dashboard" class="menu-icon"> <span id="dashboardLink">Dashboard</span>
                    </a>
                </li>
                <li class="nav-item mb-3">
                    <a href="page1.html" class="nav-link text-dark">
                        <img src="images/products.png" alt="Produits" class="menu-icon"> <span id="productsLink">Produits</span>
                    </a>
                </li>
                <li class="nav-item mb-3">
                    <a href="pageCommandes1.html" class="nav-link text-dark">
                        <img src="images/orders.png" alt="Commandes" class="menu-icon"> <span id="ordersLink">Commandes</span>
                    </a>
                </li>
                <li class="nav-item mb-3">
                    <a href="pageFournisseur1.html" class="nav-link text-dark">
                        <img src="images/suppliers.png" alt="Fournisseurs" class="menu-icon"> <span id="suppliersLink">Fournisseurs</span>
                    </a>
                </li>
                <li class="nav-item mb-3">
                    <a href="pageRapport1.html" class="nav-link text-dark">
                        <img src="images/reports.png" alt="Rapports" class="menu-icon"> <span id="reportsLink">Rapports</span>
                    </a>
                </li>
                <li class="nav-item mb-3">
                    <a href="createuser1.html" class="nav-link text-dark">
                        <img src="images/add.png" alt="Créer un utilisateur" class="menu-icon"> <span id="createUserLink">Créer un utilisateur</span>
                    </a>
                </li>
                <li class="nav-item mb-3">
                    <a href="displayusers1.html" class="nav-link text-dark">
                        <img src="images/view.png" alt="Voir les utilisateurs" class="menu-icon"> <span id="viewUsersLink">Voir les utilisateurs</span>
                    </a>
                </li>
                <li class="nav-item mb-3">
                    <a href="pageParam1.html" class="nav-link text-dark">
                        <img src="images/settings.png" alt="Paramètres" class="menu-icon"> <span id="settingsLink">Paramètres</span>
                    </a>
                </li>
            </ul>
            <!-- Bouton de Déconnexion -->
            <button class="btn btn-danger w-100 mt-5" id="logoutButton">Déconnexion</button>

            <!-- Script pour gérer la déconnexion -->
            <script>
                // Gestion du clic sur le bouton de déconnexion
                document.getElementById('logoutButton').addEventListener('click', function () {
                    // Redirection vers la page d'authentification
                    window.location.href = 'index.html';
                });
            </script>
        </nav>

        <!-- Contenu principal -->
        <div class="main-content">
            <h1 class="text-center mb-4" id="settingsTitle">Paramètres</h1>

            <!-- Section Utilisateur Connecté -->
            <div class="card mb-5">
                <div class="card-header" id="loggedInUserTitle">Utilisateur Connecté</div>
                <div class="card-body">
                    <p id="loggedInUser">Vous êtes connecté en tant que: <span id="username"></span></p>
                    <!-- Warning for masterkey users -->
                    <p id="masterKeyWarning" style="display: none; color: red;"></p>

                    <!-- Section Modifier le Nom d'Utilisateur (visible uniquement pour les non-masterkey) -->
                    <div id="usernameChangeSection" style="display: none;">
                        <hr> <!-- Séparateur visuel -->
                        <form id="usernameForm">
                            <div class="mb-3">
                                <label for="newUsername" class="form-label" id="newUsernameLabel"></label>
                                <input type="text" class="form-control" id="newUsername" required>
                            </div>
                            <button type="submit" class="btn btn-custom" id="changeUsernameButton"></button>
                        </form>
                    </div>
                </div>
            </div>

            <!-- Section Modifier le Mot de Passe -->
            <div class="card mb-5">
                <div class="card-header" id="changePasswordTitle">Modifier le Mot de Passe</div>
                <div class="card-body">
                    <form id="passwordForm">
                        <div class="mb-3">
                            <label for="oldPassword" class="form-label" id="oldPasswordLabel">Ancien Mot de Passe</label>
                            <input type="password" class="form-control" id="oldPassword" required>
                        </div>
                        <div class="mb-3">
                            <label for="newPassword" class="form-label" id="newPasswordLabel">Nouveau Mot de Passe</label>
                            <input type="password" class="form-control" id="newPassword" required>
                        </div>
                        <div class="mb-3">
                            <label for="confirmPassword" class="form-label" id="confirmPasswordLabel">Confirmer le Nouveau Mot de Passe</label>
                            <input type="password" class="form-control" id="confirmPassword" required>
                        </div>
                        <button type="submit" class="btn btn-custom" id="changePasswordButton">Modifier</button>
                    </form>
                </div>
            </div>

            <!-- Section Changer la Langue -->
            <div class="card mb-5">
                <div class="card-header" id="changeLanguageTitle">Changer la Langue</div>
                <div class="card-body">
                    <form id="languageForm">
                        <div class="mb-3">
                            <label for="languageSelect" class="form-label" id="languageLabel">Langue</label>
                            <select class="form-select" id="languageSelect">
                                <!-- Options will be dynamically populated by JavaScript -->
                            </select>
                        </div>
                        <button type="submit" class="btn btn-custom" id="changeLanguageButton">Changer la Langue</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- Popup Message -->
    <div id="popupMessage" class="popup-message" style="display: none;">
        <img id="popupGif" src="" alt="Status GIF" class="popup-gif">
        <p id="popupText"></p>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="scripts/pageParam1.js"></script>
</body>
</html>